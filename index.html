<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cognitive Pattern Prototype</title>
  <link rel="stylesheet" href="./assets/css/base.css" />
</head>
<body>
  <header class="topbar">
    <div class="container topbar-inner">
      <a class="brand" href="./index.html" aria-label="Home">
        <span class="brand-mark">â—Ž</span>
        <span class="brand-text" data-i18n="brand">Cognitive Pattern</span>
      </a>

      <div class="topbar-actions">
        <button class="lang-btn" id="langToggleBtn" type="button" aria-label="Toggle language">
          <span class="lang-pill" id="langPill">EN</span>
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1 class="hero-title" data-i18n="home_title">Check dominant function (prototype)</h1>
      <p class="hero-sub" data-i18n="home_subtitle">
        Start with one page (Ne dominant confirmation). Big text, simple clicks. No dark theme.
      </p>

      <div class="hero-cta">
        <a class="btn primary" href="./pages/ne-dom.html" data-i18n="home_start_ne">
          Start: Ne dominant confirmation
        </a>
      </div>

      <div class="hero-note" data-i18n="home_note">
        Your answers are saved locally in your browser.
      </div>
    </section>
  </main>

  <script src="./assets/js/app.js"></script>
  <script>
    (function(){
      window.App.init({
        ui: { en: './data/ui_en.json', vi: './data/ui_vi.json' }
      }).then(() => {
        window.App.applyI18n(document);
        const btn = document.getElementById('langToggleBtn');
        const pill = document.getElementById('langPill');

        function refreshLangUI(){
          const lang = window.App.getLang();
          pill.textContent = lang.toUpperCase();
        }

        refreshLangUI();
        btn.addEventListener('click', async () => {
          const next = window.App.getLang() === 'en' ? 'vi' : 'en';
          await window.App.setLang(next);
          await window.App.reloadUI();
          window.App.applyI18n(document);
          refreshLangUI();
        });
      });
    })();
  </script>
</body>
</html>
